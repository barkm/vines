var X=Object.defineProperty;var Y=(e,t,o)=>t in e?X(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o;var H=(e,t,o)=>(Y(e,typeof t!="symbol"?t+"":t,o),o),B=(e,t,o)=>{if(!t.has(e))throw TypeError("Cannot "+o)};var i=(e,t,o)=>(B(e,t,"read from private field"),o?o.call(e):t.get(e)),h=(e,t,o)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,o)},s=(e,t,o,l)=>(B(e,t,"write to private field"),l?l.call(e,o):t.set(e,o),o);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))l(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&l(c)}).observe(document,{childList:!0,subtree:!0});function o(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerpolicy&&(r.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?r.credentials="include":n.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(n){if(n.ep)return;n.ep=!0;const r=o(n);fetch(n.href,r)}})();var g,d;const j=class{constructor(t,o){h(this,g,void 0);h(this,d,void 0);H(this,"plot",t=>{i(this,d).beginPath(),i(this,d).moveTo(...i(this,g)),i(this,d).lineTo(...t.position),i(this,d).strokeStyle=t.color,i(this,d).lineWidth=2,i(this,d).stroke(),s(this,g,[...t.position])});H(this,"copy",()=>new j(i(this,g),i(this,d)));s(this,g,t),s(this,d,o)}};let q=j;g=new WeakMap,d=new WeakMap;const a=(e,t)=>(t-e)*Math.random()+e,L=(e,t=1)=>t*Math.tanh(e/t),Z=e=>[...Array(e).keys()],D=(e,t,o)=>Z(o).map(l=>l*(t-e)/o+e),G=e=>[new C(e,1),new C(e,-1)];var y,M,S,A,O,W,E,F;class C{constructor({position:t,direction:o=0,length:l=40,width:n=10,steps:r=20,color:c="black"},f){h(this,y,void 0);h(this,M,void 0);h(this,S,void 0);h(this,A,void 0);h(this,O,void 0);h(this,W,void 0);h(this,E,0);h(this,F,void 0);s(this,y,[...t]),s(this,M,o),s(this,S,l),s(this,A,n),s(this,O,r),s(this,F,f),s(this,W,c)}spawn(){return[]}next(){let t=i(this,E)/i(this,O);const o=t>=1;t=Math.min(t,1);const l=i(this,S)*t,n=i(this,F)*i(this,A)*Math.sin(Math.PI*t),r=Math.cos(i(this,M)),c=Math.sin(i(this,M)),f=[i(this,y)[0]+l*r-n*c,i(this,y)[1]+l*c+n*r];return s(this,E,i(this,E)+1),{value:{position:f,color:i(this,W)},done:o}}}y=new WeakMap,M=new WeakMap,S=new WeakMap,A=new WeakMap,O=new WeakMap,W=new WeakMap,E=new WeakMap,F=new WeakMap;const $=(e,{position:t,direction:o=0,length:l=40,width:n=10,steps:r=40,color:c="black"})=>D(0,2*Math.PI,e).flatMap(f=>G({position:t,direction:o+a(.98,1.02)*f,length:a(.9,1.1)*l,width:n,steps:r,color:c}));var p,u,b,x,P,v,I,k,_;const z=class{constructor({position:t,direction:o=0,step_length:l=10,direction_delta:n=Math.PI/5,stop_prob:r=.0075,branch_prob:c=.01,leaf_prob:f=.1,flower_prob:V=.0075}){h(this,p,void 0);h(this,u,void 0);h(this,b,void 0);h(this,x,void 0);h(this,P,void 0);h(this,v,void 0);h(this,I,void 0);h(this,k,void 0);h(this,_,!1);s(this,p,t),s(this,u,o),s(this,b,l),s(this,x,n),s(this,P,r),s(this,v,c),s(this,I,f),s(this,k,V)}next(){return i(this,_)||(s(this,u,i(this,u)+a(-1,1)*i(this,x)),i(this,p)[0]+=i(this,b)*Math.cos(i(this,u)),i(this,p)[1]+=i(this,b)*Math.sin(i(this,u)),s(this,_,a(0,1)<i(this,P))),{value:{position:[...i(this,p)],color:"black"},done:i(this,_)}}spawn(){if(a(0,1)<i(this,I)){const t=a(30,40),o=t/4;return G({position:[...i(this,p)],direction:i(this,u)+a(-1,1)*Math.PI/3,length:t,width:o})}if(a(0,1)<i(this,k)){const t=a(40,50),o=t/4;return $(10,{position:[...i(this,p)],direction:i(this,u)+a(-1,1)*Math.PI/3,length:t,width:o})}return a(0,1)<i(this,v)?[new z({position:[...i(this,p)],direction:i(this,u),direction_delta:L(i(this,x),Math.PI/2),stop_prob:L(3*i(this,P)),branch_prob:L(i(this,v)),leaf_prob:L(i(this,I)),flower_prob:L(i(this,k))})]:[]}};let T=z;p=new WeakMap,u=new WeakMap,b=new WeakMap,x=new WeakMap,P=new WeakMap,v=new WeakMap,I=new WeakMap,k=new WeakMap,_=new WeakMap;let w=document.getElementById("canvas");w.width=window.devicePixelRatio*window.innerWidth;w.height=window.devicePixelRatio*window.innerHeight;w.style.width=window.innerWidth.toString()+"px";w.style.height=window.innerHeight.toString()+"px";let R=w.getContext("2d"),tt=e=>e.filter(t=>{const o=t.head.next();return t.plotter.plot(o.value),!o.done}).flatMap(t=>[t,...t.head.spawn().map(o=>({head:o,plotter:t.plotter.copy()}))]),m=[];const K=e=>D(0,2*Math.PI,10).map(t=>({head:new T({position:[...e],direction:t}),plotter:new q([...e],R)})),J=window.devicePixelRatio*window.innerWidth,Q=window.devicePixelRatio*window.innerHeight;m=K([J/2,Q/2]);setInterval(()=>{m.push(...K([Math.random()*J,Math.random()*Q]))},1e4);w.addEventListener("click",e=>{const t=[window.devicePixelRatio*e.x,window.devicePixelRatio*e.y];m.push(...K(t))});let N=0;const U=()=>{R.globalAlpha=.5,m=tt(m),m.length?N=0:(N>60&&(R.globalAlpha=.1,R.fillStyle="white",R.fillRect(0,0,w.width,w.height)),N++),requestAnimationFrame(U)};U();
